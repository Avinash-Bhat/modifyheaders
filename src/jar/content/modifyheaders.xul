<?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin" type="text/css"?>
<?xml-stylesheet href="chrome://modifyheaders/content/modifyheaders.css" type="text/css"?>

<!DOCTYPE window SYSTEM "chrome://modifyheaders/locale/modifyheaders.dtd">

<window title="&modifyheaders.extension.name;"
  id="modifyheaders-window"
  windowtype="global:modifyheaders"
  xmlns:html="http://www.w3.org/1999/xhtml"
  xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
  width="750"
  height="500"
  onload="startModifyHeaders()"
  onunload="stopModifyHeaders()">

	<script type="application/x-javascript" src="chrome://modifyheaders/content/modifyheaders.js" />
	<script type="application/x-javascript" src="chrome://modifyheaders/content/help/help.js" />

	<command id="addHeader" oncommand="oModifyHeaders.addHeader();"/>
	<command id="editHeader" oncommand="oModifyHeaders.editHeader();"/>
	<command id="deleteHeader" oncommand="oModifyHeaders.deleteHeader('&modifyheaders.options.headers.delete.mesg;');"/>
	<command id="saveHeader" oncommand="oModifyHeaders.saveHeader();"/>
	<command id="resetHeaderForm" oncommand="oModifyHeaders.clearForm();"/>
	<command id="moveRowUp" oncommand="oModifyHeaders.moveRowUp();"/>
	<command id="moveRowDown" oncommand="oModifyHeaders.moveRowDown();"/>
	<command id="enableHeader" oncommand="oModifyHeaders.enableHeader();"/>
	<command id="enableAllHeaders" oncommand="oModifyHeaders.enableAllHeaders();"/>
	<command id="disableAllHeaders" oncommand="oModifyHeaders.disableAllHeaders();"/>

	<vbox flex="1">
	  <tabbox flex="1" id="modifyheaders-tabbox" style="overflow: auto;">
		<tabs id="modifyheaders-tabs">
			<tab id="modifyheaders-headers-tab" label="&modifyheaders.tabs.headers.label;" flex="1" />
			<tab id="modifyheaders-config-tab" label="&modifyheaders.tabs.config.label;" flex="1" />
			<tab id="modifyheaders-help-tab" label="&modifyheaders.tabs.help.label;" flex="1" />
		</tabs>
		<tabpanels flex="1" id="modifyheaders-tab-panels">
			<!-- modifyheaders interface -->
			<tabpanel flex="1" id="modifyheaders-headers-tab-panel">
			
				<vbox flex="1">
					<groupbox>
						<hbox>
							<menulist id="action-menulist">
								<menupopup>
									<menuitem label="&modifyheaders.dialog.header.action.add;"/>
									<menuitem label="&modifyheaders.dialog.header.action.modify;"/>
									<menuitem label="&modifyheaders.dialog.header.action.filter;"/>
								</menupopup>
							</menulist>
							<textbox id="headername-text-box" flex="1"/>
							<textbox id="headervalue-text-box" flex="1"/>
							<button id="add-header-button" label="&modifyheaders.options.headers.add;" command="addHeader" flex="0" hidden="false"/>
							<button id="save-header-button" label="&modifyheaders.options.headers.save;" command="saveHeader" flex="0" hidden="true"/>
							<button id="reset-form-button" label="&modifyheaders.options.headers.reset;" command="resetHeaderForm" flex="0" hidden="false"/>
						</hbox>
					</groupbox>

					<!-- List of headers that can be enabled/disabled -->
					<hbox align="stretch" flex="1" xxonkeypress="oModifyHeaders.listKeyControl(event);">
						<tree id="modifyheaders-tree" seltype="single" hidecolumnpicker="true" flex="1" ondblclick="oModifyHeaders.enableHeader();">
							<treecols>
								<treecol id="actioncol" label="Action" ignoreincolumnpicker="true"/>
								<treecol id="namecol" label="Name" flex="1" sortActive="true" ignoreincolumnpicker="true"/>
								<treecol id="valuecol" label="Value" flex="1" ignoreincolumnpicker="true"/>
								<treecol id="enabledcol" width="20" ignoreincolumnpicker="true"/>
								<!-- sbcol provides space for a scrollbar if one appears -->
								<treecol id="sbcol" width="14" ignoreincolumnpicker="true"/>
							</treecols>
							<treechildren flex="1"/>
						</tree>
						
						<vbox>
							<button label="&modifyheaders.options.headers.edit;" command="editHeader" flex="0"/>
							<button label="&modifyheaders.options.headers.delete;" command="deleteHeader" flex="0"/>
							<separator orient="horizontal"/>
							<button label="&modifyheaders.options.headers.move.up;" command="moveRowUp"/>
							<button label="&modifyheaders.options.headers.move.down;" command="moveRowDown"/>
							<separator orient="horizontal"/>
							<button label="&modifyheaders.options.headers.enable;" command="enableHeader" flex="0"/>
							<button label="&modifyheaders.options.headers.enable.all;" command="enableAllHeaders" flex="0"/>
							<button label="&modifyheaders.options.headers.disable.all;" command="disableAllHeaders" flex="0"/>
							<separator orient="horizontal"/>
							<hbox>
								<vbox>
									<image src="chrome://modifyheaders/content/enabled.gif"/>
								</vbox>
								<description flex="1" value="Enabled"/>
							</hbox>
							<hbox>
								<vbox>
									<image src="chrome://modifyheaders/content/disabled.gif"/>
								</vbox>
								<description value="Disabled"/>
							</hbox>
						</vbox>
					</hbox>
				</vbox>
			</tabpanel>
			
			<!-- modifyheaders config -->
			<tabpanel flex="1" id="modifyheaders-config-tab-panel">
				<iframe flex="1" id="modifyheaders-config-tab-panel-iframe" src="chrome://modifyheaders/content/config/config.xul"/>
			</tabpanel>
			
			<!-- modifyheaders help -->
			<tabpanel flex="1" id="modifyheaders-help-tab-panel">
				<iframe flex="1" id="modifyheaders-help-tab-panel-iframe" src="chrome://modifyheaders/content/help/help.xul"/>
			</tabpanel>
		</tabpanels>
	</tabbox>
	</vbox>
</window>
